Search.setIndex({"docnames": ["API/algs", "API/napari_zarr", "API/ndblock", "API/ome_zarr_io", "API/seg_process", "API/tlfs", "GettingStarted/nnunet", "GettingStarted/ome_zarr", "GettingStarted/result_caching", "GettingStarted/segmentation_pipeline", "GettingStarted/setting_up_the_script", "index"], "filenames": ["API/algs.rst", "API/napari_zarr.rst", "API/ndblock.rst", "API/ome_zarr_io.rst", "API/seg_process.rst", "API/tlfs.rst", "GettingStarted/nnunet.rst", "GettingStarted/ome_zarr.rst", "GettingStarted/result_caching.rst", "GettingStarted/segmentation_pipeline.rst", "GettingStarted/setting_up_the_script.rst", "index.rst"], "titles": ["cvpl_tools/im/algs", "cvpl_tools/ome_zarr/napari/add.py", "cvpl_tools/im/ndblock.py", "cvpl_tools/ome_zarr/io.py", "cvpl_tools/im/seg_process.py", "cvpl_tools/tools/fs.py", "nn-UNet", "OME_ZARR", "Result Caching", "Segmentation Pipeline", "Setting Up the Script", "Introduction - cvpl_tools documentation"], "terms": {"thi": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "subdirectori": [0, 8, 10], "defin": [0, 4, 9, 10, 11], "relev": [0, 6], "algorithm": [0, 4, 6, 8, 9], "parallel": [0, 9], "process": [0, 4, 8, 9, 10, 11], "nd": 0, "imag": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "api": [0, 1, 2, 3, 4, 5, 7, 9, 10], "async": [0, 2, 3, 4, 5, 9], "dask_label": 0, "label": [0, 1, 3, 4, 7, 11], "ndarrai": [0, 2, 4, 5], "tupl": [0, 2, 4, 5, 9, 10], "int": [0, 2, 3, 4, 5, 9], "dtype": [0, 2, 4, 10], "_scalartype_co": [0, 2, 4], "arrai": [0, 2, 3, 4, 5, 6, 7, 9, 10], "ndblock": [0, 4, 5, 9, 11], "output_dtyp": 0, "none": [0, 2, 3, 4, 5, 7, 8, 9, 10], "context_arg": [0, 4, 5, 8, 9], "dict": [0, 2, 3, 4, 5, 7, 9], "dask": [0, 2, 3, 5, 7, 9, 11], "version": [0, 11], "scipi": [0, 11], "ndimag": 0, "paramet": [0, 2, 3, 4, 5, 6, 9], "The": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10], "output": [0, 2, 3, 4, 6, 8, 9, 10], "data": [0, 4, 6, 9, 10], "type": [0, 2, 3, 4, 5, 6, 7, 9], "choos": [0, 9], "one": [0, 2, 3, 5, 6, 7, 9, 10, 11], "you": [0, 3, 6, 7, 8, 9, 10, 11], "sure": [0, 9, 10], "accommod": 0, "max": [0, 9], "number": [0, 2, 4, 5, 6, 8, 9, 10], "contour": [0, 4, 9], "found": [0, 5, 9, 10], "extra": [0, 2, 4, 7], "contextu": [0, 4], "argument": [0, 2, 4, 5, 6, 7, 9], "cache_url": [0, 4, 5, 8, 9], "str": [0, 2, 3, 4, 5, 9, 10], "rdirfilesystem": [0, 2, 4, 5, 9], "point": [0, 4, 5, 9], "directori": [0, 3, 4, 5, 7, 9, 11], "under": [0, 3, 4, 5, 10], "which": [0, 2, 3, 4, 6, 7, 8, 9, 10], "cach": [0, 4, 5, 9, 10, 11], "store": [0, 3, 7, 9], "log": [0, 3, 6, 8, 11], "bool": [0, 2, 3, 4, 5, 9], "option": [0, 2, 3, 4, 5, 7, 9], "If": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 11], "provid": [0, 2, 3, 5, 6, 7, 9, 10, 11], "true": [0, 2, 3, 4, 5, 7, 8, 9, 10], "print": [0, 3, 8, 10], "some": [0, 8, 9, 10], "debug": [0, 8, 9, 10], "info": [0, 4], "coil": 0, "logger": 0, "return": [0, 2, 3, 4, 5, 8, 9, 10], "lbl_im": 0, "nlbl": 0, "where": [0, 4, 6, 7, 8, 9, 10], "i": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10], "global": 0, "same": [0, 2, 4, 5, 6, 7, 10, 11], "chunk": [0, 2, 4, 5, 7, 8, 9, 10], "size": [0, 2, 4, 5, 6, 9], "input": [0, 2, 4, 6, 7, 9, 10], "view": [1, 2, 3, 4, 5, 11], "sourc": [1, 2, 3, 4, 5], "zarr": [1, 3, 5, 6, 8, 9, 10, 11], "For": [1, 2, 3, 4, 6, 8, 9, 10], "om": [1, 3, 5, 6, 8, 9, 10, 11], "subarray_from_path": 1, "can": [1, 2, 3, 6, 7, 8, 9, 10, 11], "us": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "gener": [1, 2, 4, 6, 8], "an": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "ha": [1, 2, 6, 7, 9], "associ": [1, 4], "file": [1, 2, 3, 5, 6, 8, 9, 10, 11], "": [1, 2, 4, 5, 6, 7, 8, 9, 10], "image_ome_zarr": 1, "label_nam": [1, 7], "path": [1, 2, 3, 5, 8, 9, 10, 11], "open": [1, 3, 7, 10], "togeth": 1, "singl": [1, 2, 4, 6, 7, 8, 9], "group_from_path": 1, "call": [1, 4, 5, 6, 9, 10], "class": [2, 4, 6, 7, 8, 9], "arr": [2, 10], "repres": [2, 4, 9], "n": [2, 4, 6, 9], "dimension": [2, 9], "grid": 2, "each": [2, 4, 6, 7, 8, 9], "block": [2, 4, 9, 10], "arbitrari": [2, 9], "shape": [2, 3, 4, 6, 7], "when": [2, 3, 4, 5, 6, 7, 8, 9, 10], "1": [2, 3, 4, 5, 6, 7, 8, 9, 10], "all": [2, 6, 8, 9, 10], "ax": 2, "numpi": [2, 3, 4, 5, 6, 7, 9, 10, 11], "match": [2, 8, 9], "In": [2, 3, 6, 8, 9, 10], "case": [2, 3, 4, 6, 7, 8, 9, 10], "vari": 2, "e": [2, 3, 4, 9], "g": [2, 3, 7, 9], "A": [2, 4, 5, 6, 7, 8, 9, 11], "2": [2, 3, 4, 5, 6, 7, 8, 9, 10], "mai": [2, 4, 6, 7, 8, 9, 10], "neighbor": [2, 4], "5": [2, 4, 6], "10": [2, 4], "current": [2, 4, 5, 10], "we": [2, 3, 6, 7, 8, 9, 10], "assum": [2, 3], "block_index": 2, "list": [2, 4, 6], "alwai": 2, "order": [2, 8, 10], "0": [2, 3, 4, 6, 7, 9], "m": [2, 6], "increas": 2, "from": [2, 3, 4, 5, 6, 7, 8, 9, 10], "side": [2, 9], "tail": 2, "first": [2, 6, 7, 8, 9], "as_dask_arrai": 2, "storage_opt": [2, 3, 5, 9], "get": [2, 4, 6, 9, 10], "copi": [2, 3, 9], "valu": [2, 6, 7, 10], "specifi": [2, 3, 4, 5, 6, 9, 11], "compress": [2, 5, 9], "format": [2, 5, 6, 7, 8, 9], "persist": [2, 8, 9, 10], "convert": [2, 9], "retriev": 2, "get_chunks": 2, "axi": [2, 7], "length": [2, 4], "ndim": [2, 4], "is_numpi": 2, "note": [2, 6, 7, 9, 10, 11], "besid": 2, "reprformat": [2, 11], "dict_block_index_slic": 2, "have": [2, 3, 5, 6, 7, 8, 9, 10], "either": [2, 3, 7, 9], "delai": 2, "object": [2, 4, 5, 6, 7, 8, 10, 11], "former": 2, "latter": 2, "fals": [2, 3, 4, 5, 6, 7, 9], "static": 2, "load": [2, 3, 4, 5, 7, 8, 9, 10, 11], "given": [2, 4, 5, 8], "save": [2, 4, 5, 7, 8, 9, 10, 11], "function": [2, 3, 4, 5, 7, 8, 9, 10], "method": [2, 5, 6, 9], "includ": [2, 6], "compressor": [2, 5, 9], "numcodec": [2, 5, 9], "abc": [2, 5, 9], "codec": [2, 5, 9], "guarante": 2, "properti": 2, "content": [2, 5], "thei": [2, 5, 6, 9, 10], "ar": [2, 4, 5, 6, 7, 8, 9, 10, 11], "map_ndblock": 2, "sequenc": [2, 4, 9], "fn": 2, "callabl": [2, 4], "out_dtyp": [2, 4], "use_input_index_as_arrloc": 2, "new_slic": 2, "fn_arg": 2, "similar": [2, 3, 7], "da": [2, 9, 10], "map_block": [2, 10], "work": [2, 7, 8, 9, 10], "differ": [2, 3, 4, 5, 6, 9, 10], "block_info": [2, 10], "map": [2, 11], "contain": [2, 4, 5, 6, 7, 8, 9, 10], "onli": [2, 3, 5, 7, 8, 9, 10], "two": [2, 4, 6, 7, 8, 9, 10], "kei": [2, 9], "locat": [2, 4, 5, 6, 7, 8, 9], "must": 2, "indic": [2, 8], "over": [2, 9], "slice": [2, 3, 6, 11], "well": [2, 6, 7, 8, 9], "slices_list": 2, "ignor": 2, "variabl": [2, 7, 10], "replac": 2, "attribut": [2, 5, 7, 9], "pass": [2, 3, 5, 7, 8, 9, 10], "result": [2, 4, 6, 7, 9, 10, 11], "client": [2, 9, 10], "reload": 2, "done": [2, 3, 6, 7, 9], "directli": [2, 3, 4, 6, 7, 9], "reduc": [2, 4, 8], "force_numpi": 2, "concaten": 2, "forc": 2, "alreadi": [2, 8], "analysi": [2, 9], "requir": [2, 3, 6, 8, 9, 10, 11], "previou": 2, "Will": 2, "comput": [2, 4, 6, 7, 8, 9, 10], "immedi": 2, "storag": [2, 6, 7], "opiton": 2, "multiscal": [2, 5, 7, 9, 10], "appli": [2, 4, 5, 6], "write": [2, 3, 8, 9, 10, 11], "multilevel": 2, "non": 2, "zero": [2, 10], "select_column": 2, "col": 2, "perform": [2, 4, 9], "column": 2, "select": [2, 6], "2d": [2, 4, 6, 8], "sum": [2, 4, 10], "keepdim": 2, "to_dask_arrai": 2, "represent": 2, "to_dict_block_index_slic": 2, "to_numpy_arrai": 2, "name": [2, 3, 4, 7, 8], "modul": [2, 9, 10], "qualnam": 2, "start": [2, 3, 8, 10], "boundari": [2, 4], "possibl": 2, "numpy_arrai": 2, "dask_arrai": 2, "read": [3, 5, 8, 11], "load_dask_array_from_path": [3, 7, 11], "altern": 3, "load_zarr_group_from_path": [3, 7, 11], "group": [3, 7], "mode": [3, 6, 7, 10], "from_zarr": 3, "creat": [3, 5, 7, 8, 9, 10], "would": [3, 9, 10], "like": [3, 4, 6, 7, 8, 10], "zip": [3, 7], "write_ome_zarr_imag": [3, 7, 11], "onto": [3, 8], "disk": [3, 8, 10], "use_zip": [3, 7], "level": [3, 7, 9], "folder": [3, 6, 7, 8, 9], "r": [3, 7], "treat": [3, 9], "determin": [3, 10], "default": [3, 5, 9, 10], "entir": [3, 6, 7], "correspond": [3, 6], "compar": 3, "allow": [3, 7, 9, 10], "channel": [3, 6, 7], "queri": [3, 5, 8, 9], "string": [3, 7], "syntax": [3, 7], "idea": [3, 7, 9], "thank": 3, "davi": [3, 7], "bennett": [3, 7], "thread": [3, 9, 10], "http": 3, "forum": 3, "sc": 3, "t": [3, 6, 8, 9], "97798": 3, "exampl": [3, 6, 9, 10], "200": [3, 7], "1000": [3, 7], "arr_origin": [3, 7], "arr1": [3, 7], "arr2": [3, 7], "100": [3, 4, 7], "arr3": [3, 7], "500": [3, 7], "essenti": 3, "python": [3, 7, 10], "multi": [3, 7, 9, 10], "index": 3, "effect": 3, "torch": [3, 6, 7], "out_ome_zarr_path": 3, "tmp_path": [3, 9, 10], "da_arr": 3, "lbl_arr": 3, "lbl_name": 3, "make_zip": 3, "max_lay": 3, "lbl_storage_opt": 3, "asynchron": 3, "due": [3, 6, 7], "doe": [3, 4, 5, 6, 7, 8, 9, 10], "support": [3, 5, 6, 7, 9, 10], "instead": [3, 5, 6, 7, 8, 9], "temp": 3, "after": [3, 4, 6, 7, 9, 10], "why": [3, 4, 7, 8], "target": [3, 7], "temporari": [3, 7, 8, 9, 11], "base": [3, 4, 6, 9], "suffix": [3, 7], "maximum": [3, 7, 9], "layer": [3, 4, 5, 7, 9], "down": [3, 6, 9, 10], "sampl": [3, 6], "messag": [3, 10], "job": 3, "end": [3, 4, 7, 9], "q": 4, "baseclass": 4, "segprocess": [4, 10, 11], "blocktoblockprocess": 4, "my": [4, 10], "own": 4, "pipelin": [4, 10, 11], "should": [4, 6, 7, 9, 10], "subclass": 4, "wrapper": [4, 6], "around": 4, "code": [4, 7, 9, 10], "whose": 4, "centroid": [4, 6, 9], "ani": [4, 6, 7, 10], "block_to_block_forward": [4, 11], "np_forward": 4, "compute_chunk_s": 4, "local": [4, 9, 10, 11], "wise": 4, "dictionari": [4, 7, 9], "see": [4, 7, 9, 10], "docstr": 4, "tool": [4, 8, 9, 10, 11], "f": [4, 6, 8, 9, 10, 11], "cache_im": [4, 9], "more": [4, 6, 7, 9, 10], "np": [4, 5, 6, 9, 10], "befor": [4, 6, 7, 9, 10], "lc_interpretable_napari": [4, 9, 11], "layer_nam": 4, "lc": 4, "viewer": [4, 5, 7, 8, 9, 10, 11], "napari": [4, 5, 7, 8, 9, 10, 11], "extra_featur": 4, "text_color": 4, "green": 4, "displai": [4, 5, 7, 8, 9, 10, 11], "featur": [4, 7, 10], "row": 4, "nextra": 4, "add": [4, 5, 7, 9, 10, 11], "dimens": 4, "text": [4, 8, 10], "color": [4, 6, 7], "built": [4, 9, 11], "in_to_bs_custom": [4, 11], "pred_fn": 4, "uint8": [4, 9, 10], "take": [4, 6, 9, 10], "mask": [4, 7, 9], "npt": 4, "predict": [4, 6], "binari": [4, 6, 9], "segment": [4, 6, 7, 10, 11], "in_to_bs_simple_threshold": [4, 11], "threshold": [4, 6, 9], "float": [4, 9], "in_to_lc_blobdog_forward": [4, 11], "float32": [4, 9], "min_sigma": 4, "max_sigma": 4, "in_to_cc_sum_scaled_intens": [4, 11], "scale": [4, 6], "008": 4, "min_thr": 4, "spatial_box_width": 4, "up": [4, 8, 9, 11], "intens": 4, "obtain": [4, 6, 9], "cell": [4, 8, 11], "below": [4, 8, 9, 10], "exclud": 4, "set": [4, 6, 7, 9, 11], "box": 4, "width": 4, "ad": [4, 7, 9, 10], "numpynumpi": 4, "viewer_arg": [4, 9], "relat": 4, "intermedi": [4, 8, 9, 10], "estim": [4, 9], "count": [4, 11], "bs_lc_to_os_forward": [4, 11], "b": [4, 9, 10], "float64": [4, 9], "max_split": 4, "int32": [4, 9], "ordin": [4, 9], "section": [4, 6, 9], "instanc": [4, 7, 9], "integ": [4, 7], "bs_to_os_watershed3s": 4, "size_thr": 4, "60": 4, "dist_thr": 4, "rst": 4, "size_thres2": 4, "dist_thres2": 4, "rst2": 4, "describ": [4, 8, 10], "meta": [4, 5, 7, 10], "inform": 4, "about": [4, 7, 9], "summar": [4, 6], "statist": 4, "lc_to_cc_count_lc_by_s": 4, "min_siz": 4, "size_threshold": 4, "volume_weight": 4, "border_param": 4, "sever": [4, 9], "part": [4, 6, 9], "abov": [4, 6, 7, 8, 9, 10], "seen": 4, "cluster": [4, 9, 11], "volum": [4, 6, 9], "3": [4, 5, 6, 7, 8, 9, 10], "ncell": 4, "penal": 4, "accord": 4, "distanc": 4, "between": [4, 9], "voxel": [4, 6], "do": [4, 5, 7, 9, 10], "touch": 4, "edg": [4, 6], "penalti": 4, "4": [4, 6, 7, 9], "simpli": [4, 9], "discard": [4, 8, 10], "becaus": 4, "just": [4, 9], "artifact": [4, 6], "lc_to_cc_count_lc_edge_pen": 4, "oridn": 4, "os_to_cc_count_os_by_s": 4, "o": [4, 9], "25": 4, "006": 4, "os_to_lc_direct": 4, "is_glob": 4, "ex_statist": 4, "other": [4, 8, 10, 11], "step": [4, 8, 9, 10], "adapt": 4, "adequ": 4, "classif": 4, "cdir_init": [5, 8, 10, 11], "cdirqueryresult": 5, "cdir_queri": [5, 11], "behavior": 5, "exist": [5, 9, 10], "make": [5, 9, 10], "new": [5, 7, 8, 9], "empti": [5, 9, 10], "timestamp": 5, "commit": [5, 8, 9, 10], "remov": [5, 6], "noth": [5, 9], "cdir_commit": [5, 9, 10, 11], "statu": 5, "url": [5, 8, 9, 10], "cache_url_timestamp": 5, "otherwis": 5, "time": [5, 6, 7, 8, 9, 10], "stamp": 5, "its": [5, 6, 7, 8, 9], "im": [5, 9, 10, 11], "full": 5, "rel": [5, 6, 9], "preferred_chunks": [5, 9], "rechunk": [5, 9], "downsampl": [5, 6, 7, 9], "recreat": 5, "attempt": 5, "keep": 5, "stai": 5, "is_label": [5, 7, 9], "add_label": [5, 7, 9], "add_imag": [5, 7, 9], "layer_arg": [5, 9], "librari": [6, 7, 8, 9, 10], "design": 6, "medic": 6, "refer": 6, "github": 6, "follow": [6, 7, 8, 9, 10], "citat": 6, "isense": 6, "jaeger": 6, "p": 6, "kohl": 6, "petersen": 6, "j": 6, "maier": 6, "hein": 6, "k": 6, "h": 6, "2021": 6, "nnu": 6, "net": 6, "self": 6, "configur": [6, 10], "deep": 6, "learn": [6, 9, 11], "biomed": 6, "natur": 6, "18": 6, "203": 6, "211": 6, "easiest": 6, "command": [6, 7, 10], "line": [6, 10], "interfac": [6, 8], "three": [6, 9], "nnunetv2_plan_and_preprocess": 6, "nnunetv2_train": 6, "nnunetv2_predict": 6, "cvpl_tool": [6, 7, 8, 9, 10], "nnunet": 6, "cli": 6, "py": [6, 7, 10, 11], "train": [6, 9], "simplifi": 6, "hide": 6, "unus": 6, "spimquant": [6, 11], "workflow": [6, 8, 9], "need": [6, 7, 8, 9, 10], "pip": [6, 11], "instal": [6, 11], "nnunetv2": 6, "gpu": 6, "automat": [6, 10], "indirectli": 6, "through": [6, 9], "avail": [6, 10], "those": [6, 10], "unfamiliar": 6, "quirk": 6, "residu": 6, "encod": 6, "prefer": 6, "without": [6, 7, 8, 10], "sinc": [6, 9, 10], "cost": 6, "limit": 6, "3d_fullr": 6, "It": [6, 9], "pair": 6, "c": [6, 10], "y": [6, 7], "x": [6, 7], "our": [6, 7, 9, 10], "spatial": 6, "coordin": 6, "specif": [6, 10], "80": 6, "20": 6, "split": 6, "valid": 6, "draw": 6, "z": [6, 7], "scan": [6, 8], "so": [6, 8, 10], "random": 6, "distribut": [6, 8, 9, 10], "correl": 6, "thing": [6, 7], "hard": [6, 9], "avoid": 6, "invari": 6, "mean": [6, 10], "dure": 6, "zoom": [6, 9], "factor": 6, "2x": 6, "5x": 6, "much": [6, 7, 10], "wors": 6, "best": [6, 9], "phase": 6, "mousebrain": 6, "dataset": [6, 9], "origin": [6, 7, 9], "200gb": 6, "8": [6, 7], "run": [6, 7, 8, 10, 11], "epoch": 6, "small": [6, 7, 9], "link": 6, "page": [6, 7, 9, 10], "error": [6, 8], "occur": [6, 8], "fold": 6, "ensembl": 6, "model": 6, "rerun": [6, 9], "don": [6, 8, 9], "finish": 6, "better": [6, 7], "accuraci": 6, "comparison": 6, "nnunet_result": 6, "few": [6, 7, 9], "hundr": [6, 9], "mb": 6, "loss": 6, "dice": 6, "graph": [6, 8], "per": 6, "later": [6, 10], "focu": 6, "primarili": 6, "usag": 6, "within": [6, 9], "handl": 6, "mind": 6, "These": [6, 11], "larg": [6, 7, 9, 10], "4d": 6, "uint16": 6, "googl": [6, 7], "bucket": 6, "gc": [6, 9], "khanlab": 6, "mouse_appmaptapo": 6, "bid": 6, "sub": [6, 7, 8, 10], "f4a1te3": 6, "micr": 6, "f4a1te3_sampl": 6, "brain_acq": 6, "blaze4x_spim": 6, "1610": 6, "9653": 6, "9634": 6, "quantifi": 6, "beta": 6, "amyloid": 6, "plaqu": 6, "appear": 6, "round": 6, "bright": [6, 9], "spot": 6, "detect": 6, "simpl": [6, 9, 10], "problem": [6, 9, 10], "come": [6, 8, 9], "howev": [6, 7, 10], "area": 6, "mark": [6, 9], "posit": 6, "easier": [6, 9], "m1": 6, "mn": 6, "hand": 6, "bia": 6, "correct": 6, "smooth": 6, "out": [6, 8, 9], "caus": [6, 8, 9, 10], "Then": 6, "sai": 6, "gui": 6, "paint": 6, "region": [6, 7, 8, 9], "elsewher": 6, "vertic": 6, "produc": [6, 9, 10], "rest": [6, 9, 10], "them": [6, 10], "find": [6, 8, 9], "neg_mask": 6, "connect": [6, 9], "compon": 6, "individu": [6, 7], "tabl": 6, "report": 6, "next": [6, 8, 9], "discuss": [6, 7, 9], "qualiti": 6, "most": [6, 9], "crucial": 6, "accur": [6, 9], "u": [6, 9], "term": 6, "how": [6, 7, 8, 9, 11], "3d": [6, 9], "good": [6, 9], "look": [6, 7, 9, 10], "choic": [6, 9], "mani": [6, 7, 8, 9, 10], "across": [6, 10], "v": 6, "cover": 6, "correctli": 6, "incorrectli": 6, "widget": 7, "button": 7, "bottom": 7, "left": 7, "corner": 7, "window": [7, 10], "invok": 7, "To": [7, 9], "wai": [7, 9], "import": [7, 8, 9, 10], "napari_add_ome_zarr": 7, "subarrai": 7, "absolut": 7, "your": [7, 9, 10], "kwarg": [7, 9], "displayed_name_in_ui": 7, "underli": 7, "implement": [7, 9], "regardless": [7, 10], "both": [7, 10], "standard": 7, "cvpl_zarr": 7, "add_ome_zarr_group_from_path": 7, "addit": 7, "cloud": [7, 9, 11], "gcsf": 7, "gf": 7, "gcsfilesystem": 7, "token": 7, "get_mapp": 7, "path_to_your": 7, "zarr_group": 7, "via": [7, 8, 9], "boolean": 7, "whether": 7, "segmentaion": 7, "distinct": 7, "similarli": 7, "multipl": 7, "talk": [7, 9], "understand": [7, 8, 9], "structur": 7, "basic": [7, 8, 9], "what": [7, 8, 9], "linux": 7, "zarrai": 7, "smallest": 7, "zattr": 7, "zgroup": 7, "denot": [7, 9], "collaps": 7, "expand": 7, "here": [7, 8, 10], "multisc": 7, "confus": 7, "crash": 7, "forget": 7, "subfold": [7, 8], "except": [7, 10], "root": [7, 9, 10, 11], "zipstor": 7, "unpack": 7, "lack": [7, 9], "hpc": [7, 10], "system": [7, 10], "canada": [7, 10], "than": [7, 9], "thu": 7, "somewher": 7, "As": [7, 9], "2024": 7, "14": 7, "writer": 7, "doubl": 7, "issu": [7, 8, 9, 10], "patch": 7, "ve": [7, 10], "also": [7, 9, 10], "io": [7, 11], "want": [7, 8, 9, 10], "task": [7, 10], "respect": 7, "conveni": [7, 9, 10], "load_ome_zarr_array_from_path": 7, "commonli": 7, "script": [7, 9, 11], "in_channel": 7, "With": [7, 10], "crop": 7, "onc": [8, 9, 10], "think": 8, "encount": [8, 10], "long": [8, 9], "densiti": [8, 9], "expect": [8, 9], "heatmap": 8, "graphic": 8, "show": [8, 9, 10], "final": [8, 9, 10], "got": 8, "consol": 8, "redo": [8, 10], "rather": 8, "difficult": 8, "went": 8, "wrong": 8, "aid": 8, "veri": [8, 9], "help": [8, 9], "identifi": [8, 9], "friendli": 8, "headach": 8, "risk": 8, "unknown": 8, "difficulti": 8, "environ": 8, "strategi": [8, 10], "overcom": 8, "insid": [8, 10], "tree": 8, "node": 8, "children": 8, "txt": [8, 10], "plot": 8, "cachedirectori": [8, 9, 11], "detail": 8, "everi": [8, 10], "cacherootdirectori": 8, "tlf": [8, 9, 10], "loc": 8, "remot": 8, "now": [8, 9, 10, 11], "dir": [8, 10], "program": [8, 10], "child": 8, "sub_queri": 8, "subdir": 8, "els": 8, "successfulli": 8, "readabl": 8, "flat": 8, "scheme": 8, "suitabl": [8, 9], "re": [8, 9, 10], "back": [8, 9, 10], "memori": [8, 10], "slower": 8, "usual": [8, 10], "big": 8, "lightsheet": [9, 10], "microscopi": 9, "mous": [9, 10], "brain": 9, "gb": 9, "necessari": 9, "trackabl": 9, "project": 9, "research": 9, "autom": 9, "visibl": 9, "pixel": 9, "test": 9, "give": [9, 10], "incom": 9, "abl": 9, "quickli": 9, "On": 9, "consist": 9, "larger": 9, "ten": 9, "minut": 9, "hour": 9, "often": 9, "again": 9, "interpret": 9, "consid": 9, "def": [9, 10], "cell_count": 9, "block3d": 9, "inst": 9, "instance_segment": 9, "cell_cnt": 9, "count_inst": 9, "seem": [9, 10], "complet": 9, "bug": 9, "unexpectedli": 9, "becom": 9, "know": [9, 10, 11], "did": 9, "reason": 9, "ideal": 9, "place": [9, 11], "visual": [9, 11], "etc": 9, "costli": 9, "address": 9, "put": [9, 10], "cvpl": 9, "particular": 9, "integr": 9, "item": [9, 10], "By": 9, "hierarch": [9, 10], "build": 9, "break": 9, "IN": [9, 10], "cc": 9, "min": 9, "One": 9, "background": 9, "anoth": 9, "machin": 9, "separ": [9, 10], "watersh": 9, "finner": 9, "perhap": 9, "seper": 9, "abstract": 9, "four": 9, "reus": 9, "variat": 9, "plan": 9, "model_predict": 9, "direct_inst_segment": 9, "watershed_inst_segment": 9, "cell_cnt_from_inst": 9, "go": [9, 11], "actual": 9, "undon": 9, "along": 9, "convent": 9, "cache_path": [9, 10], "compute_result": 9, "forward": 9, "temp_directori": 9, "while": 9, "await": 9, "lambda": [9, 10], "ndisplai": [9, 10], "skip": [9, 10], "4096": 9, "chunksiz": 9, "flatter": 9, "fast": 9, "cross": 9, "256": 9, "boilerpl": 9, "setup": [9, 11], "__name__": [9, 10], "__main__": [9, 10], "main": [9, 10], "worker": [9, 10], "config": [9, 10], "temporary_directori": [9, 10], "load_im": 9, "example_seg_process": 9, "close": [9, 10], "signatur": 9, "arg1": 9, "argn": 9, "chang": [9, 10], "util": 10, "brief": 10, "descript": 10, "depend": [10, 11], "multithread": 10, "fit": 10, "written": 10, "scratch": 10, "enough": 10, "quickstart": 10, "post": 10, "initi": 10, "modifi": 10, "simplest": 10, "guid": 10, "tmp": 10, "TO": 10, "FOR": 10, "threads_per_work": 10, "6": 10, "n_worker": 10, "9": 10, "ensur": 10, "execut": 10, "creation": 10, "spawn": 10, "exactli": 10, "top": [10, 11], "guard": 10, "statement": 10, "present": 10, "lead": 10, "infinit": 10, "loop": 10, "complic": 10, "stem": 10, "add_ome_zarr_array_from_path": 10, "fetch": 10, "drag": 10, "navig": 10, "typic": 10, "speed": 10, "slow": 10, "lag": 10, "happen": 10, "solut": 10, "solv": 10, "itself": 10, "too": 10, "resourc": 10, "freed": 10, "though": 10, "had": 10, "right": 10, "echo": 10, "stdout": 10, "stderr": 10, "logfil": 10, "even": 10, "accident": 10, "dprint": 10, "logfile_stdout": 10, "log_stdout": 10, "w": 10, "logfile_stderr": 10, "log_stderr": 10, "sy": 10, "multioutputstream": 10, "map_fn": 10, "access": 10, "fix": 10, "ones": 10, "check": 10, "some_cache_path": 10, "is_commit": 10, "multi_step_comput": 10, "cache_at": 10, "cache_path1": 10, "is_commit1": 10, "computea": 10, "cache_path2": 10, "is_commit2": 10, "computebfroma": 10, "multi_step_cach": 10, "second": 10, "sort": 10, "complex": 10, "broken": 10, "smaller": 10, "simpler": 10, "quick": 10, "pretti": 10, "bare": 10, "bone": 10, "custom": 10, "qsetup": 10, "captur": 10, "programmingtool": 10, "computervis": 10, "robartsresearch": 10, "plc": 10, "plcompon": 10, "get_client": 10, "12": 10, "AND": 10, "anyon": 10, "pleas": 10, "let": [10, 11], "me": [10, 11], "scikit": 11, "conflict": 11, "pyqt": 11, "pyside2": 11, "gettingstart": 11, "ome_zarr": 11, "quicker": 11, "motiv": 11, "microscop": 11, "atla": 11, "extend": 11, "overview": 11, "tip": 11, "bs_to_o": 11, "lc_to_cc": 11, "os_to_cc": 11, "os_to_lc": 11, "any_to_ani": 11, "alg": 11}, "objects": {"cvpl_tools.im.algs.dask_label": [[0, 0, 1, "", "label"]], "cvpl_tools.im.ndblock": [[2, 1, 1, "", "NDBlock"], [2, 1, 1, "", "ReprFormat"]], "cvpl_tools.im.ndblock.NDBlock": [[2, 2, 1, "", "as_dask_array"], [2, 2, 1, "", "get_chunksize"], [2, 2, 1, "", "is_numpy"], [2, 2, 1, "", "load"], [2, 2, 1, "", "map_ndblocks"], [2, 2, 1, "", "persist"], [2, 2, 1, "", "reduce"], [2, 2, 1, "", "save"], [2, 2, 1, "", "select_columns"], [2, 2, 1, "", "sum"], [2, 2, 1, "", "to_dask_array"], [2, 2, 1, "", "to_dict_block_index_slices"], [2, 2, 1, "", "to_numpy_array"]], "cvpl_tools.im.process.base": [[4, 0, 1, "", "block_to_block_forward"], [4, 0, 1, "", "bs_lc_to_os_forward"], [4, 0, 1, "", "in_to_bs_custom"], [4, 0, 1, "", "in_to_bs_simple_threshold"], [4, 0, 1, "", "in_to_cc_sum_scaled_intensity"], [4, 0, 1, "", "in_to_lc_blobdog_forward"], [4, 0, 1, "", "lc_interpretable_napari"]], "cvpl_tools.im.process.bs_to_os": [[4, 0, 1, "", "bs_to_os_watershed3sizes"]], "cvpl_tools.im.process.lc_to_cc": [[4, 0, 1, "", "lc_to_cc_count_lc_by_size"], [4, 0, 1, "", "lc_to_cc_count_lc_edge_penalized"]], "cvpl_tools.im.process.os_to_cc": [[4, 0, 1, "", "os_to_cc_count_os_by_size"]], "cvpl_tools.im.process.os_to_lc": [[4, 0, 1, "", "os_to_lc_direct"]], "cvpl_tools.ome_zarr.io": [[3, 0, 1, "", "load_dask_array_from_path"], [3, 0, 1, "", "load_zarr_group_from_path"], [3, 0, 1, "", "write_ome_zarr_image"]], "cvpl_tools.tools.fs": [[5, 0, 1, "", "cdir_commit"], [5, 0, 1, "", "cdir_init"], [5, 0, 1, "", "cdir_query"], [5, 0, 1, "", "display"], [5, 0, 1, "", "load"], [5, 0, 1, "", "save"]]}, "objtypes": {"0": "py:function", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "function", "Python function"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"cvpl_tool": [0, 1, 2, 3, 4, 5, 11], "im": [0, 2, 4], "alg": 0, "ome_zarr": [1, 3, 7], "napari": 1, "add": 1, "py": [1, 2, 3, 4, 5], "ndblock": 2, "io": 3, "seg_process": 4, "bs_to_o": 4, "lc_to_cc": 4, "os_to_cc": 4, "os_to_lc": 4, "any_to_ani": 4, "tool": 5, "f": 5, "nn": 6, "unet": 6, "overview": [6, 8], "neg": 6, "mask": 6, "mous": 6, "brain": 6, "lightsheet": 6, "annot": 6, "view": 7, "om": 7, "zarr": 7, "file": 7, "read": 7, "write": 7, "specifi": 7, "slice": 7, "path": 7, "result": 8, "cach": 8, "root": 8, "directori": [8, 10], "tip": 8, "segment": 9, "pipelin": 9, "motiv": 9, "microscop": 9, "cell": 9, "count": 9, "atla": 9, "map": 9, "object": 9, "segprocess": 9, "extend": 9, "run": 9, "set": 10, "up": 10, "script": 10, "dask": 10, "cluster": 10, "temporari": 10, "log": 10, "setup": 10, "cachedirectori": 10, "A": 10, "quicker": 10, "introduct": 11, "document": 11, "content": 11, "api": 11, "refer": 11}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 58}, "alltitles": {"cvpl_tools/im/algs": [[0, "cvpl-tools-im-algs"]], "cvpl_tools/ome_zarr/napari/add.py": [[1, "cvpl-tools-ome-zarr-napari-add-py"]], "cvpl_tools/im/ndblock.py": [[2, "cvpl-tools-im-ndblock-py"]], "cvpl_tools/ome_zarr/io.py": [[3, "cvpl-tools-ome-zarr-io-py"]], "cvpl_tools/im/seg_process.py": [[4, "cvpl-tools-im-seg-process-py"]], "bs_to_os": [[4, "bs-to-os"]], "lc_to_cc": [[4, "lc-to-cc"]], "os_to_cc": [[4, "os-to-cc"]], "os_to_lc": [[4, "os-to-lc"]], "any_to_any": [[4, "any-to-any"]], "cvpl_tools/tools/fs.py": [[5, "cvpl-tools-tools-fs-py"]], "nn-UNet": [[6, "nn-unet"]], "Overview": [[6, "overview"], [8, "overview"]], "Negative Masking for Mouse-brain Lightsheet": [[6, "negative-masking-for-mouse-brain-lightsheet"]], "Annotation": [[6, "annotation"]], "OME_ZARR": [[7, "ome-zarr"]], "Viewing of ome zarr file": [[7, "viewing-of-ome-zarr-file"]], "Reading and Writing ome zarr files": [[7, "reading-and-writing-ome-zarr-files"]], "Specifying slices in path": [[7, "specifying-slices-in-path"]], "Result Caching": [[8, "result-caching"]], "cache root directory": [[8, "cache-root-directory"]], "cache directory": [[8, "cache-directory"]], "Tips": [[8, "tips"]], "Segmentation Pipeline": [[9, "segmentation-pipeline"]], "Motivation: Microscope, Cell Counting, Atlas map and Object Segmentation": [[9, "motivation-microscope-cell-counting-atlas-map-and-object-segmentation"]], "SegProcess": [[9, "segprocess"]], "Extending the Pipeline": [[9, "extending-the-pipeline"]], "Running the Pipeline": [[9, "running-the-pipeline"]], "Setting Up the Script": [[10, "setting-up-the-script"]], "Dask Cluster and temporary directory": [[10, "dask-cluster-and-temporary-directory"]], "Dask Logging Setup": [[10, "dask-logging-setup"]], "CacheDirectory": [[10, "cachedirectory"]], "A Quicker Setup": [[10, "a-quicker-setup"]], "Introduction - cvpl_tools documentation": [[11, "introduction-cvpl-tools-documentation"]], "Contents:": [[11, null]], "API Reference": [[11, null]]}, "indexentries": {"label() (in module cvpl_tools.im.algs.dask_label)": [[0, "cvpl_tools.im.algs.dask_label.label"]], "ndblock (class in cvpl_tools.im.ndblock)": [[2, "cvpl_tools.im.ndblock.NDBlock"]], "reprformat (class in cvpl_tools.im.ndblock)": [[2, "cvpl_tools.im.ndblock.ReprFormat"]], "as_dask_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.as_dask_array"]], "get_chunksize() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.get_chunksize"]], "is_numpy() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.is_numpy"]], "load() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.load"]], "map_ndblocks() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.map_ndblocks"]], "persist() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.persist"]], "reduce() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.reduce"]], "save() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.save"]], "select_columns() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.select_columns"]], "sum() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.sum"]], "to_dask_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_dask_array"]], "to_dict_block_index_slices() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_dict_block_index_slices"]], "to_numpy_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_numpy_array"]], "load_dask_array_from_path() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.load_dask_array_from_path"]], "load_zarr_group_from_path() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.load_zarr_group_from_path"]], "write_ome_zarr_image() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.write_ome_zarr_image"]], "block_to_block_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.block_to_block_forward"]], "bs_lc_to_os_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.bs_lc_to_os_forward"]], "bs_to_os_watershed3sizes() (in module cvpl_tools.im.process.bs_to_os)": [[4, "cvpl_tools.im.process.bs_to_os.bs_to_os_watershed3sizes"]], "in_to_bs_custom() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_bs_custom"]], "in_to_bs_simple_threshold() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_bs_simple_threshold"]], "in_to_cc_sum_scaled_intensity() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_cc_sum_scaled_intensity"]], "in_to_lc_blobdog_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_lc_blobdog_forward"]], "lc_interpretable_napari() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.lc_interpretable_napari"]], "lc_to_cc_count_lc_by_size() (in module cvpl_tools.im.process.lc_to_cc)": [[4, "cvpl_tools.im.process.lc_to_cc.lc_to_cc_count_lc_by_size"]], "lc_to_cc_count_lc_edge_penalized() (in module cvpl_tools.im.process.lc_to_cc)": [[4, "cvpl_tools.im.process.lc_to_cc.lc_to_cc_count_lc_edge_penalized"]], "os_to_cc_count_os_by_size() (in module cvpl_tools.im.process.os_to_cc)": [[4, "cvpl_tools.im.process.os_to_cc.os_to_cc_count_os_by_size"]], "os_to_lc_direct() (in module cvpl_tools.im.process.os_to_lc)": [[4, "cvpl_tools.im.process.os_to_lc.os_to_lc_direct"]], "cdir_commit() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_commit"]], "cdir_init() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_init"]], "cdir_query() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_query"]], "display() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.display"]], "load() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.load"]], "save() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.save"]]}})