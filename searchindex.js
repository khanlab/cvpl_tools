Search.setIndex({"docnames": ["API/algs", "API/napari_zarr", "API/ndblock", "API/ome_zarr_io", "API/seg_process", "API/tlfs", "GettingStarted/beta_amyloid_plaque_detection", "GettingStarted/nnunet", "GettingStarted/ome_zarr", "GettingStarted/result_caching", "GettingStarted/segmentation_pipeline", "GettingStarted/setting_up_the_script", "index"], "filenames": ["API/algs.rst", "API/napari_zarr.rst", "API/ndblock.rst", "API/ome_zarr_io.rst", "API/seg_process.rst", "API/tlfs.rst", "GettingStarted/beta_amyloid_plaque_detection.rst", "GettingStarted/nnunet.rst", "GettingStarted/ome_zarr.rst", "GettingStarted/result_caching.rst", "GettingStarted/segmentation_pipeline.rst", "GettingStarted/setting_up_the_script.rst", "index.rst"], "titles": ["cvpl_tools/im/algs", "cvpl_tools/ome_zarr/napari/add.py", "cvpl_tools/im/ndblock.py", "cvpl_tools/ome_zarr/io.py", "cvpl_tools/im/seg_process.py", "cvpl_tools/tools/fs.py", "Beta-Amyloid Plaque Detection", "nn-UNet", "OME_ZARR", "Result Caching", "Segmentation Pipeline", "Setting Up the Script", "Introduction - cvpl_tools documentation"], "terms": {"thi": [0, 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12], "subdirectori": [0, 9, 11], "defin": [0, 4, 10, 11, 12], "relev": [0, 1, 7], "algorithm": [0, 4, 7, 9, 10], "parallel": [0, 10], "process": [0, 4, 6, 9, 10, 11, 12], "nd": 0, "imag": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "api": [0, 1, 2, 3, 4, 5, 8, 10, 11], "async": [0, 2, 3, 4, 5, 10], "dask_label": 0, "label": [0, 1, 3, 4, 8, 12], "ndarrai": [0, 2, 4, 5], "tupl": [0, 2, 4, 5, 10, 11], "int": [0, 1, 2, 3, 4, 5, 10], "dtype": [0, 2, 4, 11], "_scalartype_co": [0, 2, 4], "arrai": [0, 1, 2, 3, 4, 5, 7, 8, 10, 11], "ndblock": [0, 4, 5, 10, 12], "output_dtyp": 0, "none": [0, 1, 2, 3, 4, 5, 8, 9, 10, 11], "context_arg": [0, 4, 5, 9, 10], "dict": [0, 1, 2, 3, 4, 5, 8, 10], "dask": [0, 2, 3, 5, 8, 10, 12], "version": [0, 12], "scipi": [0, 12], "ndimag": 0, "paramet": [0, 1, 2, 3, 4, 5, 7, 10], "The": [0, 1, 2, 3, 4, 5, 7, 8, 9, 10, 11], "output": [0, 2, 3, 4, 7, 9, 10, 11], "data": [0, 4, 7, 10, 11], "type": [0, 2, 3, 4, 5, 7, 8, 10], "choos": [0, 10], "one": [0, 1, 2, 3, 5, 7, 8, 10, 11, 12], "you": [0, 3, 7, 8, 9, 10, 11, 12], "sure": [0, 10, 11], "accommod": 0, "max": [0, 10], "number": [0, 1, 2, 4, 5, 7, 9, 10, 11], "contour": [0, 4, 10], "found": [0, 5, 10, 11], "extra": [0, 2, 4, 8], "contextu": [0, 4], "argument": [0, 1, 2, 4, 5, 7, 8, 10], "cache_url": [0, 4, 5, 9, 10], "str": [0, 1, 2, 3, 4, 5, 10, 11], "rdirfilesystem": [0, 2, 4, 5, 10], "point": [0, 4, 5, 10], "directori": [0, 3, 4, 5, 8, 10, 12], "under": [0, 3, 4, 5, 11], "which": [0, 2, 3, 4, 7, 8, 9, 10, 11], "cach": [0, 4, 5, 10, 11, 12], "store": [0, 3, 8, 10], "log": [0, 3, 7, 9, 12], "bool": [0, 1, 2, 3, 4, 5, 10], "option": [0, 2, 3, 4, 5, 8, 10], "If": [0, 1, 2, 3, 4, 5, 7, 8, 10, 11, 12], "provid": [0, 2, 3, 5, 7, 8, 10, 11, 12], "true": [0, 1, 2, 3, 4, 5, 8, 9, 10, 11], "print": [0, 3, 9, 11], "some": [0, 7, 9, 10, 11], "debug": [0, 9, 10, 11], "info": [0, 4], "coil": 0, "logger": 0, "return": [0, 2, 3, 4, 5, 9, 10, 11], "lbl_im": 0, "nlbl": 0, "where": [0, 1, 4, 7, 8, 9, 10, 11], "i": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "global": 0, "same": [0, 2, 4, 5, 7, 8, 11, 12], "chunk": [0, 2, 4, 5, 8, 9, 10, 11], "size": [0, 2, 4, 5, 7, 10], "input": [0, 2, 4, 7, 8, 10, 11], "view": [1, 2, 3, 4, 5, 12], "sourc": [1, 2, 3, 4, 5], "zarr": [1, 3, 5, 7, 9, 10, 11, 12], "For": [1, 2, 3, 4, 7, 9, 10, 11], "om": [1, 3, 5, 7, 9, 10, 11, 12], "subarray_from_path": [1, 12], "can": [1, 2, 3, 7, 8, 9, 10, 11, 12], "us": [1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12], "gener": [1, 2, 4, 7, 9], "an": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "ha": [1, 2, 7, 8, 10], "associ": [1, 4], "file": [1, 2, 3, 5, 7, 9, 10, 11, 12], "": [1, 2, 4, 5, 7, 8, 9, 10, 11], "image_ome_zarr": 1, "label_nam": [1, 8], "path": [1, 2, 3, 5, 9, 10, 11, 12], "open": [1, 3, 8, 11], "togeth": 1, "singl": [1, 2, 4, 7, 8, 9, 10], "group_from_path": [1, 12], "call": [1, 4, 5, 7, 10, 11], "group": [1, 3, 8, 12], "viewer": [1, 4, 5, 8, 9, 10, 11, 12], "zarr_group": [1, 8], "merge_channel": 1, "kwarg": [1, 8, 10], "lbl_kwarg": 1, "layer": [1, 3, 4, 5, 8, 10], "exist": [1, 5, 10, 11], "along": [1, 10], "its": [1, 5, 7, 8, 9, 10], "object": [1, 2, 4, 5, 7, 8, 9, 11, 12], "attach": 1, "contain": [1, 2, 4, 5, 7, 8, 9, 10, 11], "displai": [1, 4, 5, 8, 9, 10, 11, 12], "instead": [1, 3, 5, 7, 8, 9, 10], "per": [1, 7], "channel": [1, 3, 7, 8], "dictionari": [1, 4, 8, 10], "keyword": 1, "pass": [1, 2, 3, 5, 8, 9, 10, 11], "add_imag": [1, 5, 8, 10], "root": [1, 8, 10, 11, 12], "subarrai": [1, 8, 12], "start_level": 1, "0": [1, 2, 3, 4, 7, 8, 10], "is_label": [1, 5, 8, 10], "fals": [1, 2, 3, 4, 5, 7, 8, 10], "multiscal": [1, 2, 5, 8, 10, 11], "first": [1, 2, 7, 8, 9, 10], "assum": [1, 2, 3], "dimens": [1, 4], "onli": [1, 2, 3, 5, 7, 8, 9, 10, 11], "hierarchi": 1, "lowest": 1, "level": [1, 3, 8, 10], "highest": 1, "resolut": 1, "ad": [1, 4, 8, 10, 11], "default": [1, 3, 5, 10, 11], "suitabl": [1, 9, 10], "instanc": [1, 4, 8, 10], "segment": [1, 4, 7, 8, 11, 12], "mask": [1, 4, 8, 10, 12], "result": [1, 2, 4, 7, 8, 10, 11, 12], "need": [1, 7, 8, 9, 10, 11], "distinct": [1, 8], "color": [1, 4, 7, 8], "each": [1, 2, 4, 7, 8, 9, 10], "use_zip": [1, 3, 8], "from": [1, 2, 3, 4, 5, 7, 8, 9, 10, 11], "given": [1, 2, 4, 5, 9], "combin": 1, "load_zarr_group_from_path": [1, 3, 8, 12], "add_ome_zarr_group": 1, "function": [1, 2, 3, 4, 5, 8, 9, 10, 11], "load_zarr_array_from_path": 1, "class": [2, 4, 7, 8, 9, 10], "arr": [2, 11], "repres": [2, 4, 10], "n": [2, 4, 7, 10], "dimension": [2, 10], "grid": 2, "block": [2, 4, 10, 11], "arbitrari": [2, 10], "shape": [2, 3, 4, 7, 8], "when": [2, 3, 4, 5, 7, 8, 9, 10, 11], "1": [2, 3, 4, 5, 7, 8, 9, 10, 11], "all": [2, 7, 9, 10, 11], "ax": 2, "numpi": [2, 3, 4, 5, 7, 8, 10, 11, 12], "match": [2, 9, 10], "In": [2, 3, 7, 9, 10, 11], "case": [2, 3, 4, 7, 8, 9, 10, 11], "vari": 2, "e": [2, 3, 4, 10], "g": [2, 3, 8, 10], "A": [2, 4, 5, 7, 8, 9, 10, 12], "2": [2, 3, 4, 5, 7, 8, 9, 10, 11], "mai": [2, 4, 7, 8, 9, 10, 11], "neighbor": [2, 4], "5": [2, 4, 7], "10": [2, 4], "current": [2, 4, 5, 11], "we": [2, 3, 7, 8, 9, 10, 11], "block_index": 2, "list": [2, 4, 6, 7], "alwai": 2, "order": [2, 9, 11], "m": [2, 7], "increas": 2, "side": [2, 10], "tail": 2, "as_dask_arrai": 2, "storage_opt": [2, 3, 5, 10], "get": [2, 4, 7, 10, 11], "copi": [2, 3, 10], "valu": [2, 7, 8, 11], "specifi": [2, 3, 4, 5, 7, 10, 12], "compress": [2, 5, 10], "format": [2, 5, 7, 8, 9, 10], "persist": [2, 9, 10, 11], "convert": [2, 10], "retriev": 2, "get_chunks": 2, "axi": [2, 8], "length": [2, 4], "ndim": [2, 4], "is_numpi": 2, "note": [2, 7, 8, 10, 11, 12], "besid": 2, "reprformat": [2, 12], "dict_block_index_slic": 2, "have": [2, 3, 5, 7, 8, 9, 10, 11], "either": [2, 3, 8, 10], "delai": 2, "former": 2, "latter": 2, "static": 2, "load": [2, 3, 4, 5, 8, 9, 10, 11, 12], "save": [2, 4, 5, 8, 9, 10, 11, 12], "method": [2, 5, 7, 10], "includ": [2, 7], "compressor": [2, 5, 10], "numcodec": [2, 5, 10], "abc": [2, 5, 10], "codec": [2, 5, 10], "guarante": 2, "properti": 2, "content": [2, 5], "thei": [2, 5, 7, 10, 11], "ar": [2, 4, 5, 7, 8, 9, 10, 11, 12], "map_ndblock": 2, "sequenc": [2, 4, 10], "fn": 2, "callabl": [2, 4], "out_dtyp": [2, 4], "use_input_index_as_arrloc": 2, "new_slic": 2, "fn_arg": 2, "similar": [2, 3, 8], "da": [2, 10, 11], "map_block": [2, 11], "work": [2, 8, 9, 10, 11], "differ": [2, 3, 4, 5, 7, 10, 11], "block_info": [2, 11], "map": [2, 12], "two": [2, 4, 7, 8, 9, 10, 11], "kei": [2, 10], "locat": [2, 4, 5, 7, 8, 9, 10], "must": 2, "indic": [2, 9], "over": [2, 7, 10], "slice": [2, 3, 7, 12], "well": [2, 7, 8, 9, 10], "slices_list": 2, "ignor": 2, "variabl": [2, 8, 11], "replac": 2, "attribut": [2, 5, 8, 10], "client": [2, 10, 11], "reload": 2, "done": [2, 3, 7, 8, 10], "directli": [2, 3, 4, 7, 8, 10], "reduc": [2, 4, 9], "force_numpi": 2, "concaten": 2, "forc": 2, "alreadi": [2, 9], "analysi": [2, 10], "requir": [2, 3, 7, 9, 10, 11, 12], "previou": 2, "Will": 2, "comput": [2, 4, 7, 8, 9, 10, 11], "immedi": 2, "storag": [2, 7, 8], "opiton": 2, "appli": [2, 4, 5, 7], "write": [2, 3, 9, 10, 11, 12], "multilevel": 2, "non": 2, "zero": [2, 11], "select_column": 2, "col": 2, "perform": [2, 4, 10], "column": 2, "select": [2, 7], "2d": [2, 4, 7, 9], "sum": [2, 4, 11], "keepdim": 2, "to_dask_arrai": 2, "represent": 2, "to_dict_block_index_slic": 2, "to_numpy_arrai": 2, "name": [2, 3, 4, 8, 9], "modul": [2, 10, 11], "qualnam": 2, "start": [2, 3, 9, 11], "boundari": [2, 4], "possibl": 2, "numpy_arrai": 2, "dask_arrai": 2, "read": [3, 5, 9, 12], "load_dask_array_from_path": [3, 8, 12], "altern": 3, "mode": [3, 7, 8, 11], "from_zarr": 3, "creat": [3, 5, 8, 9, 10, 11], "would": [3, 10, 11], "like": [3, 4, 7, 8, 9, 11], "zip": [3, 8], "write_ome_zarr_imag": [3, 8, 12], "onto": [3, 9], "disk": [3, 9, 11], "folder": [3, 7, 8, 9, 10], "r": [3, 8], "treat": [3, 10], "determin": [3, 11], "entir": [3, 7, 8], "correspond": [3, 7], "compar": 3, "allow": [3, 8, 10, 11], "queri": [3, 5, 9, 10], "string": [3, 8], "syntax": [3, 8], "idea": [3, 8, 10], "thank": 3, "davi": [3, 8], "bennett": [3, 8], "thread": [3, 10, 11], "http": 3, "forum": 3, "sc": 3, "t": [3, 7, 9, 10], "97798": 3, "exampl": [3, 7, 10, 11], "200": [3, 8], "1000": [3, 8], "arr_origin": [3, 8], "arr1": [3, 8], "arr2": [3, 8], "100": [3, 4, 8], "arr3": [3, 8], "500": [3, 8], "essenti": 3, "python": [3, 8, 11], "multi": [3, 8, 10, 11], "index": 3, "effect": 3, "torch": [3, 7, 8], "out_ome_zarr_path": 3, "tmp_path": [3, 10, 11], "da_arr": 3, "lbl_arr": 3, "lbl_name": 3, "make_zip": 3, "max_lay": 3, "lbl_storage_opt": 3, "asynchron": 3, "due": [3, 7, 8], "doe": [3, 4, 5, 7, 8, 9, 10, 11], "support": [3, 5, 7, 8, 10, 11], "temp": 3, "after": [3, 4, 7, 8, 10, 11], "why": [3, 4, 8, 9], "target": [3, 8], "temporari": [3, 8, 9, 10, 12], "base": [3, 4, 7, 10], "suffix": [3, 8], "maximum": [3, 8, 10], "down": [3, 7, 10, 11], "sampl": [3, 7], "messag": [3, 11], "job": 3, "end": [3, 4, 8, 10], "q": 4, "baseclass": 4, "segprocess": [4, 11, 12], "blocktoblockprocess": 4, "my": [4, 11], "own": 4, "pipelin": [4, 6, 11, 12], "should": [4, 7, 8, 10, 11], "subclass": 4, "wrapper": [4, 7], "around": 4, "code": [4, 8, 10, 11], "whose": 4, "centroid": [4, 6, 7, 10], "ani": [4, 7, 8, 11], "block_to_block_forward": [4, 12], "np_forward": 4, "compute_chunk_s": 4, "local": [4, 10, 11, 12], "wise": 4, "see": [4, 8, 10, 11], "docstr": 4, "tool": [4, 9, 10, 11, 12], "f": [4, 7, 9, 10, 11, 12], "cache_im": [4, 10], "more": [4, 7, 8, 10, 11], "np": [4, 5, 7, 10, 11], "befor": [4, 7, 8, 10, 11], "lc_interpretable_napari": [4, 10, 12], "layer_nam": 4, "lc": 4, "napari": [4, 5, 8, 9, 10, 11, 12], "extra_featur": 4, "text_color": 4, "green": 4, "featur": [4, 8, 11], "row": 4, "nextra": 4, "add": [4, 5, 8, 10, 11, 12], "text": [4, 9, 11], "built": [4, 10, 12], "in_to_bs_custom": [4, 12], "pred_fn": 4, "uint8": [4, 10, 11], "take": [4, 7, 10, 11], "npt": 4, "predict": [4, 7], "binari": [4, 7, 10], "in_to_bs_simple_threshold": [4, 12], "threshold": [4, 7, 10], "float": [4, 10], "in_to_lc_blobdog_forward": [4, 12], "float32": [4, 10], "min_sigma": 4, "max_sigma": 4, "in_to_cc_sum_scaled_intens": [4, 12], "scale": [4, 7], "008": 4, "min_thr": 4, "spatial_box_width": 4, "up": [4, 9, 10, 12], "intens": 4, "obtain": [4, 7, 10], "cell": [4, 9, 12], "below": [4, 6, 7, 9, 10, 11], "exclud": 4, "set": [4, 7, 8, 10, 12], "box": 4, "width": 4, "numpynumpi": 4, "viewer_arg": [4, 10], "relat": 4, "intermedi": [4, 9, 10, 11], "estim": [4, 10], "count": [4, 12], "bs_lc_to_os_forward": [4, 12], "b": [4, 10, 11], "float64": [4, 10], "max_split": 4, "int32": [4, 10], "ordin": [4, 10], "section": [4, 7, 10], "integ": [4, 8], "bs_to_os_watershed3s": 4, "size_thr": 4, "60": 4, "dist_thr": 4, "rst": 4, "size_thres2": 4, "dist_thres2": 4, "rst2": 4, "describ": [4, 9, 11], "meta": [4, 5, 8, 11], "inform": 4, "about": [4, 8, 10], "summar": [4, 7], "statist": 4, "lc_to_cc_count_lc_by_s": 4, "min_siz": 4, "size_threshold": 4, "volume_weight": 4, "border_param": 4, "sever": [4, 10], "part": [4, 7, 10], "abov": [4, 7, 8, 9, 10, 11], "seen": 4, "cluster": [4, 10, 12], "volum": [4, 6, 7, 10], "3": [4, 5, 7, 8, 9, 10, 11], "ncell": 4, "penal": 4, "accord": 4, "distanc": 4, "between": [4, 10], "voxel": [4, 7], "do": [4, 5, 8, 10, 11], "touch": 4, "edg": [4, 7], "penalti": 4, "4": [4, 7, 8, 10], "simpli": [4, 10], "discard": [4, 9, 11], "becaus": 4, "just": [4, 10], "artifact": [4, 7], "lc_to_cc_count_lc_edge_pen": 4, "oridn": 4, "os_to_cc_count_os_by_s": 4, "o": [4, 10], "25": 4, "006": 4, "os_to_lc_direct": 4, "is_glob": 4, "ex_statist": 4, "other": [4, 9, 11, 12], "step": [4, 9, 10, 11], "adapt": 4, "adequ": 4, "classif": 4, "cdir_init": [5, 9, 11, 12], "cdirqueryresult": 5, "cdir_queri": [5, 12], "behavior": 5, "make": [5, 10, 11], "new": [5, 8, 9, 10], "empti": [5, 10, 11], "timestamp": 5, "commit": [5, 9, 10, 11], "remov": [5, 7], "noth": [5, 10], "cdir_commit": [5, 10, 11, 12], "statu": 5, "url": [5, 9, 10, 11], "cache_url_timestamp": 5, "otherwis": 5, "time": [5, 7, 8, 9, 10, 11], "stamp": 5, "im": [5, 10, 11, 12], "full": 5, "rel": [5, 7, 10], "preferred_chunks": [5, 10], "rechunk": [5, 10], "downsampl": [5, 7, 8, 10], "recreat": 5, "attempt": 5, "keep": 5, "stai": 5, "add_label": [5, 8, 10], "layer_arg": [5, 10], "figur": 6, "illustr": 6, "overview": [6, 12], "librari": [7, 8, 9, 10, 11], "design": 7, "medic": 7, "refer": 7, "github": 7, "follow": [7, 8, 9, 10, 11], "citat": 7, "isense": 7, "jaeger": 7, "p": 7, "kohl": 7, "petersen": 7, "j": 7, "maier": 7, "hein": 7, "k": 7, "h": 7, "2021": 7, "nnu": 7, "net": 7, "self": 7, "configur": [7, 11], "deep": 7, "learn": [7, 10, 12], "biomed": 7, "natur": 7, "18": 7, "203": 7, "211": 7, "easiest": 7, "command": [7, 8, 11], "line": [7, 11], "interfac": [7, 9], "three": [7, 10], "nnunetv2_plan_and_preprocess": 7, "nnunetv2_train": 7, "nnunetv2_predict": 7, "cvpl_tool": [7, 8, 9, 10, 11], "nnunet": 7, "cli": 7, "py": [7, 8, 11, 12], "train": [7, 10], "simplifi": 7, "hide": 7, "unus": 7, "spimquant": [7, 12], "workflow": [7, 9, 10], "pip": [7, 12], "instal": [7, 12], "nnunetv2": 7, "gpu": 7, "automat": [7, 11], "indirectli": 7, "through": [7, 10], "avail": [7, 11], "those": [7, 11], "unfamiliar": 7, "quirk": 7, "residu": 7, "encod": 7, "prefer": 7, "without": [7, 8, 9, 11], "sinc": [7, 10, 11], "cost": 7, "limit": 7, "3d_fullr": 7, "It": [7, 10], "pair": 7, "c": [7, 11], "y": [7, 8], "x": [7, 8], "our": [7, 8, 10, 11], "spatial": 7, "coordin": 7, "specif": [7, 11], "80": 7, "20": 7, "split": 7, "valid": 7, "draw": 7, "z": [7, 8], "scan": [7, 9], "so": [7, 9, 11], "random": 7, "distribut": [7, 9, 10, 11], "correl": 7, "thing": [7, 8], "hard": [7, 10], "avoid": 7, "invari": 7, "mean": [7, 11], "dure": 7, "zoom": [7, 10], "factor": 7, "2x": 7, "5x": 7, "much": [7, 8, 11], "wors": 7, "best": [7, 10], "phase": 7, "mousebrain": 7, "dataset": [7, 10], "origin": [7, 8, 10], "200gb": 7, "8": [7, 8], "run": [7, 8, 9, 11, 12], "epoch": 7, "small": [7, 8, 10], "link": 7, "page": [7, 8, 10, 11], "error": [7, 9], "occur": [7, 9], "fold": 7, "ensembl": 7, "model": 7, "rerun": [7, 10], "don": [7, 9, 10], "finish": 7, "better": [7, 8], "accuraci": 7, "comparison": 7, "nnunet_result": 7, "few": [7, 8, 10], "hundr": [7, 10], "mb": 7, "loss": 7, "dice": 7, "graph": [7, 9], "later": [7, 11], "focu": 7, "primarili": 7, "usag": 7, "within": [7, 10], "handl": 7, "mind": 7, "These": [7, 12], "larg": [7, 8, 10, 11], "4d": 7, "uint16": 7, "googl": [7, 8], "bucket": 7, "gc": [7, 10], "khanlab": 7, "mouse_appmaptapo": 7, "bid": 7, "sub": [7, 8, 9, 11], "f4a1te3": 7, "micr": 7, "f4a1te3_sampl": 7, "brain_acq": 7, "blaze4x_spim": 7, "1610": 7, "9653": 7, "9634": 7, "quantifi": 7, "beta": [7, 12], "amyloid": [7, 12], "plaqu": [7, 12], "appear": 7, "round": 7, "bright": [7, 10], "spot": 7, "detect": [7, 12], "simpl": [7, 10, 11], "problem": [7, 10, 11], "come": [7, 9, 10], "howev": [7, 8, 11], "area": 7, "mark": [7, 10], "posit": 7, "easier": [7, 10], "m1": 7, "mn": 7, "hand": 7, "bia": 7, "correct": 7, "smooth": 7, "out": [7, 9, 10], "caus": [7, 9, 10, 11], "Then": 7, "sai": 7, "gui": 7, "paint": 7, "region": [7, 8, 9, 10], "elsewher": 7, "vertic": 7, "produc": [7, 10, 11], "rest": [7, 10, 11], "them": [7, 11], "find": [7, 9, 10], "neg_mask": 7, "connect": [7, 10], "compon": 7, "individu": [7, 8], "tabl": 7, "report": 7, "next": [7, 9, 10], "discuss": [7, 8, 10], "qualiti": 7, "most": [7, 10], "crucial": 7, "accur": [7, 10], "u": [7, 10], "term": 7, "how": [7, 8, 9, 10, 12], "3d": [7, 10], "good": [7, 10], "look": [7, 8, 10, 11], "choic": [7, 10], "mani": [7, 8, 9, 10, 11], "across": [7, 11], "v": 7, "cover": 7, "correctli": 7, "incorrectli": 7, "metric": 7, "iou": 7, "score": 7, "here": [7, 8, 9, 11], "intend": 7, "outer": 7, "also": [7, 8, 10, 11], "brighter": 7, "inner": 7, "structur": [7, 8], "upper": 7, "left": [7, 8], "overal": 7, "quit": 7, "bit": 7, "labour": 7, "high": 7, "low": 7, "ones": [7, 11], "widget": 8, "button": 8, "bottom": 8, "corner": 8, "window": [8, 11], "invok": 8, "To": [8, 10], "wai": [8, 10], "import": [8, 9, 10, 11], "napari_add_ome_zarr": 8, "absolut": 8, "your": [8, 10, 11], "displayed_name_in_ui": 8, "underli": 8, "implement": [8, 10], "regardless": [8, 11], "both": [8, 11], "standard": 8, "cvpl_zarr": 8, "add_ome_zarr_group_from_path": 8, "addit": 8, "cloud": [8, 10, 12], "gcsf": 8, "gf": 8, "gcsfilesystem": 8, "token": 8, "get_mapp": 8, "path_to_your": 8, "via": [8, 9, 10], "boolean": 8, "whether": 8, "segmentaion": 8, "similarli": 8, "multipl": 8, "talk": [8, 10], "understand": [8, 9, 10], "basic": [8, 9, 10], "what": [8, 9, 10], "linux": 8, "zarrai": 8, "smallest": 8, "zattr": 8, "zgroup": 8, "denot": [8, 10], "collaps": 8, "expand": 8, "multisc": 8, "confus": 8, "crash": 8, "forget": 8, "subfold": [8, 9], "except": [8, 11], "zipstor": 8, "unpack": 8, "lack": [8, 10], "hpc": [8, 11], "system": [8, 11], "canada": [8, 11], "than": [8, 10], "thu": 8, "somewher": 8, "As": [8, 10], "2024": 8, "14": 8, "writer": 8, "doubl": 8, "issu": [8, 9, 10, 11], "patch": 8, "ve": [8, 11], "io": [8, 12], "want": [8, 9, 10, 11], "task": [8, 11], "respect": 8, "conveni": [8, 10, 11], "load_ome_zarr_array_from_path": 8, "commonli": 8, "script": [8, 10, 12], "in_channel": 8, "With": [8, 11], "crop": 8, "onc": [9, 10, 11], "think": 9, "encount": [9, 11], "long": [9, 10], "densiti": [9, 10], "expect": [9, 10], "heatmap": 9, "graphic": 9, "show": [9, 10, 11], "final": [9, 10, 11], "got": 9, "consol": 9, "redo": [9, 11], "rather": 9, "difficult": 9, "went": 9, "wrong": 9, "aid": 9, "veri": [9, 10], "help": [9, 10], "identifi": [9, 10], "friendli": 9, "headach": 9, "risk": 9, "unknown": 9, "difficulti": 9, "environ": 9, "strategi": [9, 11], "overcom": 9, "insid": [9, 11], "tree": 9, "node": 9, "children": 9, "txt": [9, 11], "plot": 9, "cachedirectori": [9, 10, 12], "detail": 9, "everi": [9, 11], "cacherootdirectori": 9, "tlf": [9, 10, 11], "loc": 9, "remot": 9, "now": [9, 10, 11, 12], "dir": [9, 11], "program": [9, 11], "child": 9, "sub_queri": 9, "subdir": 9, "els": 9, "successfulli": 9, "readabl": 9, "flat": 9, "scheme": 9, "re": [9, 10, 11], "back": [9, 10, 11], "memori": [9, 11], "slower": 9, "usual": [9, 11], "big": 9, "lightsheet": [10, 11, 12], "microscopi": 10, "mous": [10, 11, 12], "brain": [10, 12], "gb": 10, "necessari": 10, "trackabl": 10, "project": 10, "research": 10, "autom": 10, "visibl": 10, "pixel": 10, "test": 10, "give": [10, 11], "incom": 10, "abl": 10, "quickli": 10, "On": 10, "consist": 10, "larger": 10, "ten": 10, "minut": 10, "hour": 10, "often": 10, "again": 10, "interpret": 10, "consid": 10, "def": [10, 11], "cell_count": 10, "block3d": 10, "inst": 10, "instance_segment": 10, "cell_cnt": 10, "count_inst": 10, "seem": [10, 11], "complet": 10, "bug": 10, "unexpectedli": 10, "becom": 10, "know": [10, 11, 12], "did": 10, "reason": 10, "ideal": 10, "place": [10, 12], "visual": [10, 12], "etc": 10, "costli": 10, "address": 10, "put": [10, 11], "cvpl": 10, "particular": 10, "integr": 10, "item": [10, 11], "By": 10, "hierarch": [10, 11], "build": 10, "break": 10, "IN": [10, 11], "cc": 10, "min": 10, "One": 10, "background": 10, "anoth": 10, "machin": 10, "separ": [10, 11], "watersh": 10, "finner": 10, "perhap": 10, "seper": 10, "abstract": 10, "four": 10, "reus": 10, "variat": 10, "plan": 10, "model_predict": 10, "direct_inst_segment": 10, "watershed_inst_segment": 10, "cell_cnt_from_inst": 10, "go": [10, 12], "actual": 10, "undon": 10, "convent": 10, "cache_path": [10, 11], "compute_result": 10, "forward": 10, "temp_directori": 10, "while": 10, "await": 10, "lambda": [10, 11], "ndisplai": [10, 11], "skip": [10, 11], "4096": 10, "chunksiz": 10, "flatter": 10, "fast": 10, "cross": 10, "256": 10, "boilerpl": 10, "setup": [10, 12], "__name__": [10, 11], "__main__": [10, 11], "main": [10, 11], "worker": [10, 11], "config": [10, 11], "temporary_directori": [10, 11], "load_im": 10, "example_seg_process": 10, "close": [10, 11], "signatur": 10, "arg1": 10, "argn": 10, "chang": [10, 11], "util": 11, "brief": 11, "descript": 11, "depend": [11, 12], "multithread": 11, "fit": 11, "written": 11, "scratch": 11, "enough": 11, "quickstart": 11, "post": 11, "initi": 11, "modifi": 11, "simplest": 11, "guid": 11, "tmp": 11, "TO": 11, "FOR": 11, "threads_per_work": 11, "6": 11, "n_worker": 11, "9": 11, "ensur": 11, "execut": 11, "creation": 11, "spawn": 11, "exactli": 11, "top": [11, 12], "guard": 11, "statement": 11, "present": 11, "lead": 11, "infinit": 11, "loop": 11, "complic": 11, "stem": 11, "add_ome_zarr_array_from_path": 11, "fetch": 11, "drag": 11, "navig": 11, "typic": 11, "speed": 11, "slow": 11, "lag": 11, "happen": 11, "solut": 11, "solv": 11, "itself": 11, "too": 11, "resourc": 11, "freed": 11, "though": 11, "had": 11, "right": 11, "echo": 11, "stdout": 11, "stderr": 11, "logfil": 11, "even": 11, "accident": 11, "dprint": 11, "logfile_stdout": 11, "log_stdout": 11, "w": 11, "logfile_stderr": 11, "log_stderr": 11, "sy": 11, "multioutputstream": 11, "map_fn": 11, "access": 11, "fix": 11, "check": 11, "some_cache_path": 11, "is_commit": 11, "multi_step_comput": 11, "cache_at": 11, "cache_path1": 11, "is_commit1": 11, "computea": 11, "cache_path2": 11, "is_commit2": 11, "computebfroma": 11, "multi_step_cach": 11, "second": 11, "sort": 11, "complex": 11, "broken": 11, "smaller": 11, "simpler": 11, "quick": 11, "pretti": 11, "bare": 11, "bone": 11, "custom": 11, "qsetup": 11, "captur": 11, "programmingtool": 11, "computervis": 11, "robartsresearch": 11, "plc": 11, "plcompon": 11, "get_client": 11, "12": 11, "AND": 11, "anyon": 11, "pleas": 11, "let": [11, 12], "me": [11, 12], "scikit": 12, "conflict": 12, "pyqt": 12, "pyside2": 12, "gettingstart": 12, "ome_zarr": 12, "quicker": 12, "motiv": 12, "microscop": 12, "atla": 12, "extend": 12, "tip": 12, "nn": 12, "unet": 12, "neg": 12, "annot": 12, "bs_to_o": 12, "lc_to_cc": 12, "os_to_cc": 12, "os_to_lc": 12, "any_to_ani": 12, "alg": 12}, "objects": {"cvpl_tools.im.algs.dask_label": [[0, 0, 1, "", "label"]], "cvpl_tools.im.ndblock": [[2, 1, 1, "", "NDBlock"], [2, 1, 1, "", "ReprFormat"]], "cvpl_tools.im.ndblock.NDBlock": [[2, 2, 1, "", "as_dask_array"], [2, 2, 1, "", "get_chunksize"], [2, 2, 1, "", "is_numpy"], [2, 2, 1, "", "load"], [2, 2, 1, "", "map_ndblocks"], [2, 2, 1, "", "persist"], [2, 2, 1, "", "reduce"], [2, 2, 1, "", "save"], [2, 2, 1, "", "select_columns"], [2, 2, 1, "", "sum"], [2, 2, 1, "", "to_dask_array"], [2, 2, 1, "", "to_dict_block_index_slices"], [2, 2, 1, "", "to_numpy_array"]], "cvpl_tools.im.process.base": [[4, 0, 1, "", "block_to_block_forward"], [4, 0, 1, "", "bs_lc_to_os_forward"], [4, 0, 1, "", "in_to_bs_custom"], [4, 0, 1, "", "in_to_bs_simple_threshold"], [4, 0, 1, "", "in_to_cc_sum_scaled_intensity"], [4, 0, 1, "", "in_to_lc_blobdog_forward"], [4, 0, 1, "", "lc_interpretable_napari"]], "cvpl_tools.im.process.bs_to_os": [[4, 0, 1, "", "bs_to_os_watershed3sizes"]], "cvpl_tools.im.process.lc_to_cc": [[4, 0, 1, "", "lc_to_cc_count_lc_by_size"], [4, 0, 1, "", "lc_to_cc_count_lc_edge_penalized"]], "cvpl_tools.im.process.os_to_cc": [[4, 0, 1, "", "os_to_cc_count_os_by_size"]], "cvpl_tools.im.process.os_to_lc": [[4, 0, 1, "", "os_to_lc_direct"]], "cvpl_tools.ome_zarr.io": [[3, 0, 1, "", "load_dask_array_from_path"], [3, 0, 1, "", "load_zarr_group_from_path"], [3, 0, 1, "", "write_ome_zarr_image"]], "cvpl_tools.ome_zarr.napari.add": [[1, 0, 1, "", "group"], [1, 0, 1, "", "group_from_path"], [1, 0, 1, "", "subarray"], [1, 0, 1, "", "subarray_from_path"]], "cvpl_tools.tools.fs": [[5, 0, 1, "", "cdir_commit"], [5, 0, 1, "", "cdir_init"], [5, 0, 1, "", "cdir_query"], [5, 0, 1, "", "display"], [5, 0, 1, "", "load"], [5, 0, 1, "", "save"]]}, "objtypes": {"0": "py:function", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "function", "Python function"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"cvpl_tool": [0, 1, 2, 3, 4, 5, 12], "im": [0, 2, 4], "alg": 0, "ome_zarr": [1, 3, 8], "napari": 1, "add": 1, "py": [1, 2, 3, 4, 5], "ndblock": 2, "io": 3, "seg_process": 4, "bs_to_o": 4, "lc_to_cc": 4, "os_to_cc": 4, "os_to_lc": 4, "any_to_ani": 4, "tool": 5, "f": 5, "beta": 6, "amyloid": 6, "plaqu": 6, "detect": 6, "nn": 7, "unet": 7, "overview": [7, 9], "neg": 7, "mask": 7, "mous": 7, "brain": 7, "lightsheet": 7, "annot": 7, "view": 8, "om": 8, "zarr": 8, "file": 8, "read": 8, "write": 8, "specifi": 8, "slice": 8, "path": 8, "result": 9, "cach": 9, "root": 9, "directori": [9, 11], "tip": 9, "segment": 10, "pipelin": 10, "motiv": 10, "microscop": 10, "cell": 10, "count": 10, "atla": 10, "map": 10, "object": 10, "segprocess": 10, "extend": 10, "run": 10, "set": 11, "up": 11, "script": 11, "dask": 11, "cluster": 11, "temporari": 11, "log": 11, "setup": 11, "cachedirectori": 11, "A": 11, "quicker": 11, "introduct": 12, "document": 12, "content": 12, "api": 12, "refer": 12}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 58}, "alltitles": {"cvpl_tools/im/algs": [[0, "cvpl-tools-im-algs"]], "cvpl_tools/ome_zarr/napari/add.py": [[1, "cvpl-tools-ome-zarr-napari-add-py"]], "cvpl_tools/im/ndblock.py": [[2, "cvpl-tools-im-ndblock-py"]], "cvpl_tools/ome_zarr/io.py": [[3, "cvpl-tools-ome-zarr-io-py"]], "cvpl_tools/im/seg_process.py": [[4, "cvpl-tools-im-seg-process-py"]], "bs_to_os": [[4, "bs-to-os"]], "lc_to_cc": [[4, "lc-to-cc"]], "os_to_cc": [[4, "os-to-cc"]], "os_to_lc": [[4, "os-to-lc"]], "any_to_any": [[4, "any-to-any"]], "cvpl_tools/tools/fs.py": [[5, "cvpl-tools-tools-fs-py"]], "Beta-Amyloid Plaque Detection": [[6, "beta-amyloid-plaque-detection"]], "nn-UNet": [[7, "nn-unet"]], "Overview": [[7, "overview"], [9, "overview"]], "Negative Masking for Mouse-brain Lightsheet": [[7, "negative-masking-for-mouse-brain-lightsheet"]], "Annotation": [[7, "annotation"]], "OME_ZARR": [[8, "ome-zarr"]], "Viewing of ome zarr file": [[8, "viewing-of-ome-zarr-file"]], "Reading and Writing ome zarr files": [[8, "reading-and-writing-ome-zarr-files"]], "Specifying slices in path": [[8, "specifying-slices-in-path"]], "Result Caching": [[9, "result-caching"]], "cache root directory": [[9, "cache-root-directory"]], "cache directory": [[9, "cache-directory"]], "Tips": [[9, "tips"]], "Segmentation Pipeline": [[10, "segmentation-pipeline"]], "Motivation: Microscope, Cell Counting, Atlas map and Object Segmentation": [[10, "motivation-microscope-cell-counting-atlas-map-and-object-segmentation"]], "SegProcess": [[10, "segprocess"]], "Extending the Pipeline": [[10, "extending-the-pipeline"]], "Running the Pipeline": [[10, "running-the-pipeline"]], "Setting Up the Script": [[11, "setting-up-the-script"]], "Dask Cluster and temporary directory": [[11, "dask-cluster-and-temporary-directory"]], "Dask Logging Setup": [[11, "dask-logging-setup"]], "CacheDirectory": [[11, "cachedirectory"]], "A Quicker Setup": [[11, "a-quicker-setup"]], "Introduction - cvpl_tools documentation": [[12, "introduction-cvpl-tools-documentation"]], "Contents:": [[12, null]], "API Reference": [[12, null]]}, "indexentries": {"label() (in module cvpl_tools.im.algs.dask_label)": [[0, "cvpl_tools.im.algs.dask_label.label"]], "group() (in module cvpl_tools.ome_zarr.napari.add)": [[1, "cvpl_tools.ome_zarr.napari.add.group"]], "group_from_path() (in module cvpl_tools.ome_zarr.napari.add)": [[1, "cvpl_tools.ome_zarr.napari.add.group_from_path"]], "subarray() (in module cvpl_tools.ome_zarr.napari.add)": [[1, "cvpl_tools.ome_zarr.napari.add.subarray"]], "subarray_from_path() (in module cvpl_tools.ome_zarr.napari.add)": [[1, "cvpl_tools.ome_zarr.napari.add.subarray_from_path"]], "ndblock (class in cvpl_tools.im.ndblock)": [[2, "cvpl_tools.im.ndblock.NDBlock"]], "reprformat (class in cvpl_tools.im.ndblock)": [[2, "cvpl_tools.im.ndblock.ReprFormat"]], "as_dask_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.as_dask_array"]], "get_chunksize() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.get_chunksize"]], "is_numpy() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.is_numpy"]], "load() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.load"]], "map_ndblocks() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.map_ndblocks"]], "persist() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.persist"]], "reduce() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.reduce"]], "save() (cvpl_tools.im.ndblock.ndblock static method)": [[2, "cvpl_tools.im.ndblock.NDBlock.save"]], "select_columns() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.select_columns"]], "sum() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.sum"]], "to_dask_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_dask_array"]], "to_dict_block_index_slices() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_dict_block_index_slices"]], "to_numpy_array() (cvpl_tools.im.ndblock.ndblock method)": [[2, "cvpl_tools.im.ndblock.NDBlock.to_numpy_array"]], "load_dask_array_from_path() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.load_dask_array_from_path"]], "load_zarr_group_from_path() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.load_zarr_group_from_path"]], "write_ome_zarr_image() (in module cvpl_tools.ome_zarr.io)": [[3, "cvpl_tools.ome_zarr.io.write_ome_zarr_image"]], "block_to_block_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.block_to_block_forward"]], "bs_lc_to_os_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.bs_lc_to_os_forward"]], "bs_to_os_watershed3sizes() (in module cvpl_tools.im.process.bs_to_os)": [[4, "cvpl_tools.im.process.bs_to_os.bs_to_os_watershed3sizes"]], "in_to_bs_custom() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_bs_custom"]], "in_to_bs_simple_threshold() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_bs_simple_threshold"]], "in_to_cc_sum_scaled_intensity() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_cc_sum_scaled_intensity"]], "in_to_lc_blobdog_forward() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.in_to_lc_blobdog_forward"]], "lc_interpretable_napari() (in module cvpl_tools.im.process.base)": [[4, "cvpl_tools.im.process.base.lc_interpretable_napari"]], "lc_to_cc_count_lc_by_size() (in module cvpl_tools.im.process.lc_to_cc)": [[4, "cvpl_tools.im.process.lc_to_cc.lc_to_cc_count_lc_by_size"]], "lc_to_cc_count_lc_edge_penalized() (in module cvpl_tools.im.process.lc_to_cc)": [[4, "cvpl_tools.im.process.lc_to_cc.lc_to_cc_count_lc_edge_penalized"]], "os_to_cc_count_os_by_size() (in module cvpl_tools.im.process.os_to_cc)": [[4, "cvpl_tools.im.process.os_to_cc.os_to_cc_count_os_by_size"]], "os_to_lc_direct() (in module cvpl_tools.im.process.os_to_lc)": [[4, "cvpl_tools.im.process.os_to_lc.os_to_lc_direct"]], "cdir_commit() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_commit"]], "cdir_init() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_init"]], "cdir_query() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.cdir_query"]], "display() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.display"]], "load() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.load"]], "save() (in module cvpl_tools.tools.fs)": [[5, "cvpl_tools.tools.fs.save"]]}})